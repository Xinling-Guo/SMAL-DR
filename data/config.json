{
  "_comment_global": "SMAL-DR Phase 1 Configuration: Mining candidate HNH domains for Cas9 engineering",
  "_comment_work_dir": "Root directory for all data storage and processing.",
  "_comment_work_dir_2": " Before running, please cd into the SMAL-DR project directory and execute: python ./src/pipeline.py --config ./data/Cas9_submit/config.json",
  
  "work_dir": "./SMAL_DR_Results/",

  "_comment_proteins": "==================================================================================",
  "_comment_proteins_2": "DEFINE PROTEIN OF INTEREST (Currently configured for Cas9)",
  "_comment_proteins_3": "To analyze a different protein, modify the 'key', 'ipr_ids', and 'ipr_names'",
  "_comment_proteins_4": "==================================================================================",
  "_comment_proteins_5": "whole data for ipr_ids : IPR028629, IPR003615, IPR032237, IPR032239, IPR032240, IPR033114, IPR036397, PF22702",
  "_comment_proteins_6": "whole data for ipr_names :  [cas9, HNH_nuc, cas9_PI, cas9-BH, cas9_REC, HNH_cas9, RNaseH_sf, cas9_RuvC",
  "proteins": [
    {
      "key": "cas9",
      "ipr_ids": ["IPR028629", "IPR003615"],
      "ipr_names": ["cas9", "HNH_nuc"]
    }
  ],

  "_comment_input_files": "==================================================================================",
  "_comment_input_files_2": "INPUT DATA FILES (Update these paths if your data location changes)",
  "_comment_input_files_3":  "Please download the following data from the official TED and CATH databases, ",
  "_comment_input_files_4":  "and update the corresponding directory paths below: ted_domain_cath_info, ted_domain_cluster_info, cath_boundary_file, cath_boundaries_data.",
  "_comment_input_files_5":  "Replace `wt_domain_dir` with the directory containing your own domain of interest for analysis.",
  "_comment_input_files_6": "==================================================================================",
   "input_files": {
    "true_cas9_uniprot_info": "true_label/Pfam_domain_reviewed/uniprot_unique_domains.tsv",
    "true_hnh_ted_info": "../data/HNH_TED_info.xlsx",
    "ted_domain_cath_info_whole": "../../../data/TED/downloads/ted_365m.domain_summary.cath.globularity.taxid.tsv",
    "ted_domain_cath_info": "../../../data/TED/downloads/ted_365m_10w.tsv",
    "ted_domain_cluster_info_whole": "../../../data/TED/downloads/ted_324m_seq_clustering.cathlabels.tsv",
    "ted_domain_cluster_info": "../../../data/TED/downloads/ted_324m_10w.tsv",
    "cath_boundary_file": "../../../data/TED/Cas9/cath-domain-boundaries.txt",
    "cath_boundaries_data": "../../../data/TED/Cas9/cath_domain_boundaries.pkl",
    "wt_domain_dir": "../data/HNH_trueSpcas9/",
    "all_fasta": "../data/All.fasta",
    "wet_lab_info": "..../data/All_wet_ID.xlsx"
  },

  "_comment_control_flags": "==================================================================================",
  "_comment_control_flags_2": "PROCESS CONTROL FLAGS (Set to true to run specific steps, false to skip)",
  "_comment_control_flags_3": "==================================================================================",
  "run_step0": true,
  "run_step1": true,
  "run_step2_cathdb": true,
  "run_step2_cath_teddb": true,
  "run_step2_cluster_teddb": true,
  "run_step3_cath_teddb": true,
  "run_step3_cluster_teddb": true,
  "run_data_processing": true,

  "_comment_external_tools": "==================================================================================",
  "_comment_external_tools_2": "EXTERNAL TOOL PATHS",
  "_comment_external_tools_3": "==================================================================================",
  "foldseek_binary_path": "/usr/local/bin/foldseek",
  "utils_module_path": "/mnt/sdb4/protein_gen/Cas9_domain_work/code/utils_submit.py",


  "_comment_task2": "==================================================================================",
  "_comment_task2_2": "TASK 2 CONFIGURATION: Refining domain boundaries using DALI",
  "_comment_dali_setup": "Please deploy DALI locally and adjust the paths for `dali_work_dir` and `dali_bin_path` accordingly.",
  "_comment_query_pdbs_dir": "Replace `query_pdbs_dir` with the directory containing your own domain of interest for analysis.",

  "_comment_task2_3": "==================================================================================",
  "task2_config": {
    

    "run_step0_refine": true,
    "run_step1_download": true,
    "run_step2_dali": true,
    "domain_threshold": 10,
    "domain_class": "HNH",
    
    "results_before_dali": "domain_All_teddb_SpCas9_filter.csv",
    "target_pdbs_dir": "Dali_work/Target_pdbs/",
    "dali_target_dat_dir": "target_dat/",
    "query_pdbs_dir":  "../data/HNH_trueSpcas9/",
    "dali_query_dat_dir": "query_dat/",
    "dali_work_dir": "/mnt/sdb4/protein_gen/tools/Dali/DaliLite.v5/Dali_Domain_boundary_check_v8",
    "dali_bin_path": "/mnt/sdb4/protein_gen/tools/Dali/DaliLite.v5/bin" ,
    "assemble_dali_script": "../src/assemble_Dali_args.csh" ,
    "query_ids_file": "dat/importpl_query_ids.csv",
    "target_ids_file": "dat/importpl_target_ids.csv",
    "dali_results_file": "Dali_results/dali_results.csv",
    "dali_results_processed": "Dali_results/dali_10_results_pro.csv",
    "target_domains_dir": "Dali_results/Target_Dali_domain_10/",
    "query_domains_dir": "Dali_results/Query_Dali_domain_10/",
    "fs_results_dir": "Dali_results/FS_results/",
    "fs_tmp_dir": "Dali_results/FS_tmp/",

    "results_after_dali": "Dali_results/dali_10_refined_results.csv",
    "check_results_file": "Dali_results/All_Check_data.csv",
    "final_results_file": "Dali_results/final_10_refined_candidates.csv"
  },
    "task3_config": {
    "data_dir": "/root/autodl-tmp/PairNet/data",
    "results_dir": "/root/autodl-tmp/PairNet/model_weights/train_seq_no_struc_mlp_all_wet_data_all_seq_3_site",
    "batch_size": 32,
    "lr": 3e-5,
    "weight_decay": 1e-4,
    "margin": 0.5,
    "diff_threshold": 0.0,
    "hidden_dim": 256,
    "epochs": 100,
    "patience": 20,
    "embeddings_dir": "/root/autodl-tmp/PairNet/data/Esm2Embedding-sp-1280",
    "model_save_dir": "/root/autodl-tmp/PairNet/model_weights",
    "best_model_filename": "best_model.pth",
    "ranking_output_filename": "ranking_train.csv"
  },

  "task4_config": {
    "main_dir": "/root/autodl-tmp/PairNet/data", 
    "output_dir": "/root/autodl-tmp/PairNet/output/mlp_inference",  
    "model_weight": "/root/autodl-tmp/PairNet/model_weights/train_seq_no_struc_mlp_all_wet_data_all_seq_3_site/best_model.pth",  
    
    "batch_size": 4096,  
    "mode": "mlp", 
    "num_gpus": 1, 
    "input_dim": 1280, 
    "threshold": 0.0, 
    "cache_path": "/root/autodl-tmp/PairNet/embedding_cache.pt", 
    
    "embeddings_dir": "/root/autodl-tmp/PairNet/data/Esm2Embedding-sp-1280", 
    "json_path": "/root/autodl-tmp/PairNet/data/data_point.json", 
    "output_file": "final_sorted_winrates.csv" 
  },

    "task5_config": {
    "main_dir": "/root/autodl-tmp/PairNet/data", 
    "output_dir": "/root/autodl-tmp/PairNet/model_weights/transformer_train", 
    "batch_size": 32,  
    "lr": 3e-5, 
    "weight_decay": 1e-4, 
    "margin": 0.5, 
    "diff_threshold": 0.0, 
    "hidden_dim": 256, 
    "epochs": 100,  
    "patience": 20, 
    "num_gpus": 1,  
    "rank": 0,  
    "local_rank": 0,  
    "world_size": 1, 
    "cache_dir": "/root/autodl-tmp/PairNet/cache",  
    "model_save_dir": "/root/autodl-tmp/PairNet/model_weights", 
    "best_model_filename": "best_model_transformer.pth",  
    "embedding_dir": "/root/autodl-tmp/PairNet/data/Esm2Embedding-sp-1280"  
  },

   "task6_config": {
    "main_dir": "/root/autodl-tmp/PairNet/data", 
    "output_dir": "/root/autodl-tmp/PairNet/output/transformer_inference", 
    "model_weight": "/root/autodl-tmp/PairNet/model_weights/transformer_train/best_model_transformer.pth", 
    
    "batch_size": 4096,  
    "mode": "transformer", 
    "num_gpus": 1, 
    "input_dim": 1280, 
    "threshold": 0.0, 
    "cache_path": "/root/autodl-tmp/PairNet/cache/embedding_cache.pt",  
    
    "embeddings_dir": "/root/autodl-tmp/PairNet/data/Esm2Embedding-sp-1280", 
    "json_path": "/root/autodl-tmp/PairNet/data/data_point.json",  
    "output_file": "final_sorted_winrates.csv"  
  }

}
